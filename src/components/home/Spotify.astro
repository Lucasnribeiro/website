---
---

<div class="spotify border border-lime-500 content text-lime-500">
  <div class="border-b border-lime-500 bg-black bg-opacity-40 pl-2">
    <p>Currently listening</p>
  </div>
  <div id="song-info" class="flex space-x-3 p-2">
    <div id="cover">cover</div>
    <div>
      <div id="title">title</div>
      <div id="artist">artist</div>
    </div>
  </div>
</div>

<script>
  function fetchSpotifyData() {
    fetch('https://backend.lucasnribeiro.com/currently_playing_spotify.php')
      .then(response => response.json())
      .then(data => {
        const songInfo = document.getElementById('song-info');
        const cover = document.getElementById('cover');
        const title = document.getElementById('title');
        const artist = document.getElementById('artist');

        if (data && data.item && songInfo && cover && title && artist) {
          cover.innerHTML = `<img src="${data.item.album.images[0].url}" alt="Album Cover" width="64" height="64">`;
          title.textContent = data.item.name;
          artist.textContent = data.item.artists.map((artist: any) => artist.name).join(', ');
          songInfo.style.display = 'flex';
        } else {
          console.error('Invalid data structure received or elements not found');
        }
      })
      .catch(error => {
        console.error('Error fetching Spotify data:', error);
      });
  }

  // Fetch data immediately and then every 10 seconds
  fetchSpotifyData();
  setInterval(fetchSpotifyData, 10000);
</script>
